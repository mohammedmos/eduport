System.register(["./chunk-frameworks.js","./chunk-vendor.js","./chunk-confetti.js","./chunk-voting.js"],function(ln,Ot){"use strict";var w,me,pe,I,he,fe,ge,be,x,ye,G,ve,Se,je,l,C,c,A,we,b,Ce,M,Ae;return{setters:[function(i){w=i.c,me=i.Q,pe=i.s,I=i.e,he=i.aL,fe=i.aM,ge=i.f,be=i.b,x=i.r,ye=i.d,G=i.m,ve=i.i,Se=i.y,je=i.a5},function(i){l=i.o,C=i.r,c=i.a,A=i.e,we=i.f,b=i.i,Ce=i.g,M=i.u},function(i){Ae=i.p},function(){}],execute:function(){var i=Object.defineProperty,H=(t,e)=>i(t,"name",{value:e,configurable:!0});l(".js-discussions-goto-answer-button",{add:t=>{const e=t.getAttribute("href"),n=document.querySelector(e);n&&w(t,"click",o=>{if(e){o.preventDefault();let s="center";n.getBoundingClientRect().height>=window.innerHeight&&(s="start"),n.scrollIntoView({behavior:"smooth",block:s})}},{capture:!0})}}),l(".js-discussions-title-container",{add:t=>{t.querySelector(".js-discussions-goto-answer-button")?Re():Te()}});function Re(){const t=document.querySelector(".js-discussion");t&&t.classList.add("answered")}H(Re,"removeMarkAsAnswerButtons");function Te(){const t=document.querySelector(".js-discussion");t&&t.classList.remove("answered")}H(Te,"addMarkAsAnswerButtons"),C(".js-discussion-comment-mark-answer",async function(t,e){await N(t,e)}),C(".js-discussion-comment-unmark-answer",async function(t,e){await N(t,e)});async function N(t,e){const n=await e.html();let o=t;const s=t.closest("[data-replace-remote-form-target]");if(s){const r=s.getAttribute("data-replace-remote-form-target");o=r?document.getElementById(r):s}o.replaceWith(n.html)}H(N,"replaceAnswerForm");var It=Object.defineProperty,_e=(t,e)=>It(t,"name",{value:e,configurable:!0});me("keyup",".js-discussion-category-name-field",function(){const t=document.querySelector(".js-discussion-category-form");if(!t)return;const e=t.querySelector(".js-discussion-category-name-field"),n=t.querySelector(".js-discussion-poll-message"),o=t.querySelector(".js-submit-discussion-category"),s=e.value.trim().toLowerCase()==="polls";n.hidden=!s,s?o.disabled=!0:e.value.length>0&&(o.disabled=!1)}),c("click",".js-discussion-category-toggle-emoji-picker",function(t){const e=D(t),n=e.querySelector(".js-discussion-category-emoji-picker");n.hidden=!n.hidden,Ee(e)}),c("click",".js-discussion-category-emoji-button",function(t){if(!(t.currentTarget instanceof HTMLButtonElement))return;const e=D(t),n=e.querySelector(".js-discussion-category-emoji-field");n.value=t.currentTarget.value;const o=e.querySelector(".js-discussion-category-custom-emoji");o.innerHTML=t.currentTarget.innerHTML;for(const r of e.querySelectorAll(".selected-emoji"))r.classList.remove("selected-emoji");t.currentTarget.classList.add("selected-emoji");const s=e.querySelector(".js-discussion-category-emoji-picker");s.hidden=!0});function D(t){return t.currentTarget.closest(".js-discussion-category-form")}_e(D,"getDiscussionCategoryContainer");function Ee(t){const e=t.querySelector(".js-discussion-category-emoji-loader");if(!e)return;const n=e.getAttribute("data-src");n&&!e.hasAttribute("src")&&e.setAttribute("src",n)}_e(Ee,"ensurePickerLoading");var Gt=Object.defineProperty,Mt=(t,e)=>Gt(t,"name",{value:e,configurable:!0}),qe;let U;const ke=document.querySelector("#discussion_category_id"),xe=document.querySelector("#new_discussion"),Be=document.querySelector("#submit"),R=(qe=document.querySelector(".js-slash-command-surface"))==null?void 0:qe.getAttribute("data-discussion-temp-id");let T;const Le="```poll\nquestion: What is the question you are asking the community?\noptions:\n  - Option 1\n  - Option 2\n  - Option N\n```",Ht="Ask your community a question with a poll!",{getItem:Pe,setItem:Fe,removeItem:Nt}=pe("localStorage");function $e(t){var e;U=document.querySelector("#category-select-header");const n=document.querySelector(".js-discussion-category-select-label"),o=(e=t.querySelector(".js-discussion-category-emoji"))==null?void 0:e.cloneNode(!0),s=document.createTextNode(t.getAttribute("data-category-name")),r=document.createElement("span");U instanceof HTMLElement&&(r.setAttribute("id","category-select-header"),r.setAttribute("class","css-truncate css-truncate-target"),o instanceof HTMLElement&&(o.classList.add("mr-2"),r.appendChild(o)),r.appendChild(s),U.replaceWith(r),n instanceof HTMLElement&&(n.hidden=!1))}Mt($e,"updateHeader"),c("details-menu-selected",".js-discussion-category-select",function(t){const e=t.detail.relatedTarget;if($e(e),ke instanceof HTMLInputElement){const n=new URLSearchParams(window.location.search),o=Object.fromEntries(n.entries());ke.setAttribute("value",e.id);const s=document.createTextNode(e.getAttribute("data-category-name")),r=document.querySelector("#discussion_body");s.textContent==="Polls"?(T=r.value,Fe(R,T),o.welcome_text?r.value=`${r.value}
${Ht}

${Le}`:r.value=`${T}

${Le}`):Pe(R)?(r.value=Pe(R),Nt(R)):(T=r.value,Fe(R,T)),xe instanceof HTMLFormElement&&xe.checkValidity()&&(Be==null||Be.removeAttribute("disabled"))}},{capture:!0});const V={en:{translateTo:"Translate to English",translatedTo:"Translated to English"},es:{translateTo:"Traducir al espa\xF1ol",translatedTo:"Traducido al espa\xF1ol"},pt:{translateTo:"Traduzir para portugu\xEAs",translatedTo:"Traduzido para o portugu\xEAs"},ko:{translateTo:"\uD55C\uAD6D\uC5B4\uB85C \uBC88\uC5ED",translatedTo:"\uD55C\uAD6D\uC5B4\uB85C \uBC88\uC5ED"}};var Oe=Object.defineProperty,Dt=Object.defineProperties,Ut=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,Vt=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable,Ge=(t,e,n)=>e in t?Oe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Me=(t,e)=>{for(var n in e||(e={}))Vt.call(e,n)&&Ge(t,n,e[n]);if(Ie)for(var n of Ie(e))Wt.call(e,n)&&Ge(t,n,e[n]);return t},zt=(t,e)=>Dt(t,Ut(e)),d=(t,e)=>Oe(t,"name",{value:e,configurable:!0});function W(t){const e="smooth";t.scrollIntoView({behavior:e,block:"nearest"})}d(W,"scrollPageTo");const h=Ne();function He(){var t;const e=`Translate to ${h}`;return((t=V[h])==null?void 0:t.translateTo)||e}d(He,"translateLinkText");function Ne(){return navigator.languages[0].slice(0,2).toLowerCase()}d(Ne,"browserLanguage");function z(t){return!!V[t]}d(z,"isLanguageSupported");function De(t,e="en"){return new Intl.DisplayNames([e],{type:"language"}).of(t)}d(De,"resolveLanguageName");function Q(t){if(t.previousElementSibling){const e=t.previousElementSibling;e.hidden=!0}}d(Q,"skipTranslation");function Ue(){return V[h].translatedTo}d(Ue,"translatedToNotice");async function J(t="",e={},n=1e4){return(await Qe(`https://translator.github.com${t}`,{timeout:n,mode:"cors",method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-Type":"application/json"})})).json()}d(J,"translationApi");async function Ve(t={}){return t=new URLSearchParams(t),(await fetch(`/localization/ugct/link?${t}`)).text()}d(Ve,"fetchTranslationTrigger");async function We(t,e){const n=e.getAttribute("data-translation-banner-url");if(e.removeAttribute("data-translation-banner-url"),!n)return;const o=new URLSearchParams({source_language:t}),s=await fetch(`${n}?${o}`);e.innerHTML+=await s.text()}d(We,"appendBanner");async function ze(t,e,n={}){const o=[h],s=e,r=window.location.href;return(await J("/translate",Me({text:t,to:o,from:s,url:r},n)))[0].translations[0].text}d(ze,"translate");async function Qe(t,e){const{timeout:n}=e,o=new AbortController,s=setTimeout(()=>o.abort(),n),r=await fetch(t,zt(Me({},e),{signal:o.signal}));return clearTimeout(s),r}d(Qe,"fetchWithTimeout");async function K(t,e,n={}){if(!e)return;const o=e.parentElement;if(!o)return;const s=document.getElementById("translated-translated-discussion-or-comment-template");if(!s)return;o.append(new A(s,{originalLanguageInEnglish:De(t)}));const r=o.lastElementChild;if(!r)return;const u=r.querySelector(".js-general-error-message"),f=r.querySelector(".js-translation-spinner"),g=r.querySelector(".js-translation-details"),q=r.querySelector(".js-translation-details-parent"),$=r.querySelector(".js-translation-container"),k=r.querySelector(".js-translation-translated-from"),p=r.querySelector(".js-translation-try-again"),O=r.querySelector([".js","translation","feedback",h].join("-"));if(!(!u||!f||!g||!q||!$||!p||!O||!k)){try{$.innerHTML=await ze(e.outerHTML,t,n);const j=Ue();j&&(k.textContent=j),q.hidden=!1,O.hidden=!1,W(g)}catch(j){p.addEventListener("click",()=>{var S;(S=r.parentElement)==null||S.removeChild(r),K(t,e,n)}),u.hidden=!1,W(u)}f.hidden=!0}}d(K,"translateComment");async function Je(t,e){var n;const o=t.closest(".timeline-comment"),s=o==null?void 0:o.querySelector(".js-translation-trigger-container");if(!s||!o)return;if(!z(h))return Q(s);const r=o==null?void 0:o.querySelector(".js-translation-source"),u=r==null?void 0:r.outerHTML,g=(n=(await J("/detect",{text:u}))[0])==null?void 0:n.language.slice(0,2).toLowerCase();if(!z(g)||g===h)return Q(s);const q=document.getElementById("translation-trigger-for-discussion-or-comment-template");if(!s||!q)return;s.append(new A(q,{}));const $=await Ve({source_language:g,target_language:h,url:e});s.innerHTML+=$;const k=s==null?void 0:s.querySelector(".js-translation-spinner"),p=s==null?void 0:s.querySelector(".js-translation-trigger"),O=p==null?void 0:p.querySelectorAll("span")[1],j=p==null?void 0:p.querySelector("span"),S=p==null?void 0:p.closest("details-menu"),Ft=S==null?void 0:S.closest("details");if(!r||!k||!p||!O||!j||!S||!Ft)return;const $t=document.querySelector(".js-translation-banner-container");$t&&We(g,$t),S.classList.add("width-auto"),p.hidden=!1,k.hidden=!0,p.disabled=g===h,j.textContent=He(),p.addEventListener("click",()=>{Ft.removeAttribute("open"),p.disabled=!0,K(g,r,{resourceUrl:e})})}d(Je,"enableCommentTranslationOption");var Qt=Object.defineProperty,B=(t,e)=>Qt(t,"name",{value:e,configurable:!0});l(".js-discussions-comment-actions-button",{subscribe:t=>w(t,"mouseover",Ke,{capture:!1,once:!0})}),c("click",".js-discussions-comment-actions-button",function({currentTarget:t}){Ye(t)}),l(".js-discussions-comment-actions-rendered-button",{add:t=>Xe(t)}),l(".js-translation-banner-container",{add(){const t=document.querySelector(".js-discussions-comment-actions-button");t&&X(t)}});function Ke(t){const e=t.currentTarget;X(e)}B(Ke,"handleMouseover");function Xe(t){const e=t.closest(".timeline-comment-actions");if(!!e&&e.hasAttribute("data-open-after-click")){e.removeAttribute("data-open-after-click");const n=t.closest("details");if(!n)return;n.setAttribute("open","")}}B(Xe,"conditionallyOpenMenu");async function X(t){if(!t)return;const e=t.closest(".timeline-comment-actions");if(!e)return;const n=e.querySelector(".js-discussions-comment-actions-container");if(!n)return;const o=n.getAttribute("data-comment-actions-url");if(!o)return;const s=await I(document,o);!s||(n.replaceWith(s),Je(e,o))}B(X,"insertCommentActions");function Ye(t){if(!t)return;const e=t.closest(".timeline-comment-actions");!e||e.setAttribute("data-open-after-click","")}B(Ye,"setClickAfterInsert");var Jt=Object.defineProperty,y=(t,e)=>Jt(t,"name",{value:e,configurable:!0});c("preview:setup",".js-previewable-comment-form",function(t){t.currentTarget.closest(".js-supports-discussion-polls")&&t.detail.data.append("supports_polls",!0)}),l(".js-discussions-comment-edit-button",{subscribe:t=>w(t,"click",tt,{capture:!1,once:!0})}),l(".js-task-list-container .contains-task-list",{add:async t=>Ze(t)});async function Ze(t){const e=t.closest(".js-comment"),n=ee(e);if(n){if(n.querySelector(".js-preview-body"))return;const s=n.getAttribute("data-permissions-url"),r=te(n).targetType;s&&r&&await et(s,r)&&(Z(e),Y(e))}}y(Ze,"conditionallyRenderEditForm");async function et(t,e){return(await(await fetch(t,{headers:{Accept:"application/json"}})).json())[e].update}y(et,"fetchAndReturnUpdatePermission");function tt(t){const n=t.currentTarget.closest(".js-comment");Z(n),Y(n)}y(tt,"handleClick");function Y(t){const e=t.querySelector(".js-discussions-markdown-toolbar-placeholder:last-child");if(e){const n={textareaId:e.getAttribute("data-textarea-id")};ne("template.js-discussions-markdown-toolbar-template",e,n)}}y(Y,"insertMarkdownToolbar");function Z(t){const e=ee(t);if(e){const n=te(e);ne("template.js-discussions-edit-form-template",e,n)}}y(Z,"insertEditForm");function ee(t){return t.querySelector(".js-edit-comment-form-container")}y(ee,"editFormTargetContainer");function te(t){return{bodyVersion:t.getAttribute("data-body-version"),outerDivClasses:t.getAttribute("data-outer-div-classes"),repositoryId:t.getAttribute("data-repository-id"),targetBody:t.getAttribute("data-target-body"),targetType:t.getAttribute("data-target-type"),textareaId:t.getAttribute("data-textarea-id"),slashCommandUrl:t.getAttribute("data-slash-command-url")}}y(te,"editFormTemplateReplacements");function ne(t,e,n){const o=document.querySelector(t);o&&(e.innerHTML="",e.appendChild(new A(o,n)))}y(ne,"insertTemplate");var Kt=Object.defineProperty,nt=(t,e)=>Kt(t,"name",{value:e,configurable:!0});l(".js-optimistic-reaction-render-button",{subscribe:t=>w(t,"click",ot,{capture:!1})});function ot(t){const e=t.currentTarget;if(e){const n=new st(e);setTimeout(()=>{n.render()},1)}}nt(ot,"handleReactionEvent");class st{constructor(e){this.clickedReactionButton=e}render(){if(!this.isReactionAlreadyRendered)return this.addNewReactionGroup();this.isAddingReaction?this.addReactionToGroup():this.removeReactionFromGroup()}addReactionToGroup(){this.existingReactionGroupCountContainer&&this.existingReactionGroup&&(this.existingReactionGroup.removeAttribute("hidden"),this.existingReactionGroup.classList.add("user-has-reacted"),this.existingReactionGroup.hasAttribute("data-user-has-reacted-class-name")&&this.existingReactionGroup.classList.add(this.existingReactionGroup.getAttribute("data-user-has-reacted-class-name")),this.existingReactionGroupCountContainer.textContent=`${this.existingReactionGroupCount+1}`,this.addReactionToPopoverReactionButtons())}removeReactionFromGroup(){var e,n,o;this.existingReactionGroupCount===1&&this.existingReactionGroup.setAttribute("hidden",""),this.existingReactionGroupCountContainer.textContent=`${this.existingReactionGroupCount-1}`,(e=this.existingReactionGroup)==null||e.classList.remove("user-has-reacted"),((n=this.existingReactionGroup)==null?void 0:n.hasAttribute("data-user-has-reacted-class-name"))&&((o=this.existingReactionGroup)==null||o.classList.remove(this.existingReactionGroup.getAttribute("data-user-has-reacted-class-name"))),this.removeReactionFromPopoverReactionButtons()}addNewReactionGroup(){const e=this.newEmojiButtonFromTemplate();this.newEmojiButtonTemplateContainer&&e&&this.commentReactionsContainer&&(this.nextButtonGroup?this.reactionGroupsContainer.insertBefore(e,this.nextButtonGroup):this.reactionGroupsContainer.append(e),e.classList.add(this.tooltipPositionClass),this.addReactionToPopoverReactionButtons(),this.commentReactionsContainer.classList.contains("d-md-none")&&this.commentReactionsContainer.classList.add("has-reactions"))}newEmojiButtonFromTemplate(){if(this.newEmojiButtonTemplateContainer){const n=this.newEmojiButtonTemplateContainer.content.querySelector(".js-reaction-group-button");if(n)return n.cloneNode(!0)}}get nextButtonGroup(){if(this.newEmojiButtonFromTemplatePosition!==void 0&&this.newEmojiButtonFromTemplatePosition!==null){const e=this.reactionGroupsContainer.children;for(const n of e)if(Number(n.getAttribute("data-button-index-position"))>this.newEmojiButtonFromTemplatePosition)return n}}get commentContainer(){return this.clickedReactionButton.closest(".js-comment")}get buttonsContainer(){return this.commentContainer.querySelector(".js-reaction-buttons-container")}get reactionContent(){return this.clickedReactionButton.getAttribute("data-reaction-content")}get reactionGroup(){return this.buttonsContainer.querySelector(`.comment-reactions-options g-emoji[alias='${this.reactionContent}'`)}get existingReactionGroup(){if(this.reactionGroup)return this.reactionGroup.closest(".js-reaction-group-button")}get existingReactionGroupCountContainer(){if(this.existingReactionGroup)return this.existingReactionGroup.querySelector(".js-discussion-reaction-group-count")}get newEmojiButtonTemplateContainer(){return document.getElementById(`emoji-reaction-button-template-${this.reactionContent}`)}get commentReactionsContainer(){return this.buttonsContainer.closest(".js-reaction-buttons-container")}get reactionGroupsContainer(){return this.buttonsContainer.querySelector(".js-comment-reactions-options")}get isReactionAlreadyRendered(){return!!this.reactionGroup}get isAddingReaction(){if(this.existingReactionGroup)return this.existingReactionGroup.hasAttribute("data-user-has-reacted-class-name")?this.existingReactionGroup.classList.contains(this.existingReactionGroup.getAttribute("data-user-has-reacted-class-name")):!this.existingReactionGroup.classList.contains("user-has-reacted")}get existingReactionGroupCount(){return this.existingReactionGroupCountContainer?Number(this.existingReactionGroupCountContainer.innerHTML):0}get newEmojiButtonFromTemplatePosition(){const e=this.newEmojiButtonFromTemplate();if(e)return Number(e.getAttribute("data-button-index-position"))}get tooltipPositionClass(){return this.buttonsContainer.querySelectorAll("button").length>1?"tooltipped-s":"tooltipped-se"}addReactionToPopoverReactionButtons(){const e=this.commentContainer.querySelectorAll(".js-add-reaction-popover");for(const n of e){const o=n.querySelector(`button[data-reaction-content="${this.reactionContent}"]`);o.classList.add("border","color-border-default","color-bg-accent"),o.value.match(/unreact/)||(o.value=o.value.replace(/react/,"unreact"))}}removeReactionFromPopoverReactionButtons(){const e=this.commentContainer.querySelectorAll(".js-add-reaction-popover");for(const n of e){const o=n.querySelector(`button[data-reaction-content="${this.reactionContent}"]`);o.classList.remove("border","color-border-default","color-bg-accent"),o.value.match(/unreact/)&&(o.value=o.value.replace(/unreact/,"react"))}}}nt(st,"OptimisticReactionRenderer");var Xt=Object.defineProperty,rt=(t,e)=>Xt(t,"name",{value:e,configurable:!0});l(".js-inline-comment-form-container",{add:t=>it(t)}),c("click",".js-discussions-previewable-comment-form",function({currentTarget:t}){_(t,{willFocus:!0})}),l(".js-discussions-previewable-comment-form-auto-replace",{add:t=>_(t,{willFocus:!1})}),c("quote-selection",".js-discussion-quote-selection",function(t){const e=t.detail,n=e.closest(".js-timeline-discussion-comment");if(!n)return;const o=e.range;_(n,{willFocus:!0}),e.range=o});function it(t){const e=t.closest(".discussion-timeline-item.js-comment-container");e&&e.getAttribute("data-open-edit-form-after-load")==="true"&&(e.setAttribute("data-open-edit-form-after-load","false"),_(t,{willFocus:!0}))}rt(it,"conditionallyInsertForm");function _(t,e){const n=t.closest(".js-timeline-discussion-comment"),o=n.querySelector(".js-discussions-previewable-comment-form-container");if(!o)return;const s=o.getAttribute("data-parent-comment-id"),r=o.getAttribute("data-anchor-id"),u=o.getAttribute("data-back-page"),f=document.querySelector("template.js-new-comment-template");s&&f&&!o.querySelector(".js-discussion-comment-form")&&(o.innerHTML="",o.appendChild(new A(f,{id:s,anchorId:r,backPage:u}))),e.willFocus&&he(n)}rt(_,"insertForm"),C(".js-discussions-previewable-comment-form-container .js-discussion-comment-form",async function(t,e){var n;await e.text(),fe(t),(n=t.closest(".js-discussions-previewable-comment-form-container").querySelector(".js-comment-form-error"))==null||n.classList.add("d-none")});var Yt=Object.defineProperty,a=(t,e)=>Yt(t,"name",{value:e,configurable:!0});async function L(){const t=m(),e=t.value,o=e.slice(0,t.selectionEnd).split(/\s+/).pop();P().hidden=!1,m().setAttribute("aria-expanded","true");const[s,r]=o.split(":");r!=null?await ht(s,r):jt(s);const u=mt();e.trim().length>0?(u.hidden=!1,ge(v())):(u.hidden=!0,be(v()))}a(L,"updateSearchSuggestionResults");function at(){const t=m();t.value="",t.getAttribute("data-initial-value").trim().length===0?L():x(v())}a(at,"handleSearchClear");function ct(t){switch(t.detail.hotkey){case"Enter":if(m().value.trim()!==""||se().querySelector(".js-navigation-item.navigation-focus"))return;x(v());return;case"Escape":P().hidden=!0,m().setAttribute("aria-expanded","false");break}}a(ct,"handleSearchInputKeydown");function ut(t){if(t&&t.target){const e=t.target,n=m();n!=null&&n.setAttribute("aria-activedescendant",e.id)}}a(ut,"handleSearchFormFocus");function oe(){ye(v()),P().hidden=!0,m().setAttribute("aria-expanded","false")}a(oe,"hideSearchSuggestions");function lt(t){const e=m(),n=t.target;if(n.hasAttribute("data-search")){x(v());return}let o=n.getAttribute("data-value");o[o.length-1]!==":"&&(o+=" ");const s=e.value.slice(0,e.selectionEnd).replace(/\S+$/,""),r=e.value.slice(e.selectionEnd);let u="";r.length>0&&r[0]!==" "&&(u=" "),e.value=s+o+u+r,t.preventDefault(),e.focus();const f=s.length+o.length;e.setSelectionRange(f,f),we(e,"input")}a(lt,"handleSelectedSuggestionResultEvent");function dt(){const t=m(),e=t.value.length;t.setSelectionRange(e,e),t.focus(),oe()}a(dt,"restoreSearchInputFocus");function v(){return document.querySelector(".js-discussion-search-form")}a(v,"getSearchForm");function m(){return document.querySelector(".js-discussion-search-input")}a(m,"getSearchInput");function P(){return document.querySelector(".js-discussion-search-autocomplete-dropdown")}a(P,"getSearchAutocompleteDropdown");function se(){return document.querySelector(".js-discussion-search-autocomplete-results")}a(se,"getSearchAutocompleteResultsContainer");function mt(){return document.querySelector(".js-discussion-search-clear")}a(mt,"getSearchClearButton");const Zt=G(pt);function pt(){return[{value:"author:",description:"filter by discussion author"},{value:"category:",description:"filter by discussion category"},{value:"is:",description:"filter by answered or unanswered"}]}a(pt,"fetchQualifierSuggestions");async function ht(t,e){const n=ft(t),o=re(n,e).then(s=>s.map(r=>({value:`${t}:${r.value}`,description:r.description})));ie(o)}a(ht,"renderValueSuggestions");async function ft(t){switch(t){case"author":return bt();case"category":return yt();case"label":return vt();case"is":return St();default:return[]}}a(ft,"fetchSuggestionsForQualifier");const gt=G(async t=>await(await fetch(t,{headers:{Accept:"application/json"}})).json());async function bt(){const t=m().getAttribute("data-suggestable-authors-path");return gt(t)}a(bt,"fetchAuthorSuggestions");async function yt(){return JSON.parse(m().getAttribute("data-suggestable-categories"))}a(yt,"fetchCategorySuggestions");async function vt(){const t=m().getAttribute("data-suggestable-labels-path");return gt(t)}a(vt,"fetchLabelSuggestions");async function St(){return[{value:"answered"},{value:"unanswered"}]}a(St,"fetchTypeSuggestions");function jt(t){const e=Zt(),n=re(e,t,{fuzzy:!1}).then(o=>o.length===0?e:o);ie(n)}a(jt,"renderQualifierSuggestions");async function re(t,e,{fuzzy:n}={fuzzy:!0}){const o=await t,s=e.trim();return!s||s.length===0?o:o.filter(r=>n?r.value.includes(s):r.value.startsWith(s))}a(re,"filterSuggestionsList");async function ie(t){const e=t.then(n=>n.length===0?b``:ae());Ce(b`
      <div aria-live="assertive">
        ${wt()} ${M(e,ae())}
        ${M(Ct(t),b` loading... `)}
      </div>
    `,se())}a(ie,"renderSuggestionDropdown");function ae(){return b`<h6 class="width-full text-normal border-bottom color-bg-default color-fg-muted py-2 mb-2">
    Suggested filters
  </h6>`}a(ae,"renderSuggestionsTitle");function wt(){const t=m().value.trim();return t.length===0?b``:b`
    <div
      class="d-flex flex-justify-between border-bottom-0 rounded-1 py-1 px-2 mx-0 mb-1 js-navigation-item"
      data-search="true"
    >
      <span class="text-bold">${t}</span>
      <svg class="octicon mt-1" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true">
        <path
          transform-origin="center"
          transform="scale(1,-1) translate(0, 1)"
          fill-rule="evenodd"
          d="M6.78 1.97a.75.75 0 010 1.06L3.81 6h6.44A4.75 4.75 0 0115 10.75v2.5a.75.75 0 01-1.5 0v-2.5a3.25 3.25 0 00-3.25-3.25H3.81l2.97 2.97a.75.75 0 11-1.06 1.06L1.47 7.28a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0z"
        ></path>
      </svg>
    </div>
  `}a(wt,"renderSearchSuggestion");async function Ct(t){return(await t).map((n,o)=>b`
        <div
          role="option"
          id="discussions-search-option-${o}"
          class="border-bottom-0 rounded-1 py-1 px-2 mx-0 mb-1 js-navigation-item"
          data-value="${n.value}"
        >
          <span class="text-bold">${n.value}</span>
          <span class="autocomplete-text-qualifier color-fg-muted">${n.description}</span>
        </div>
      `)}a(Ct,"renderSuggestionList"),c("focusin",".js-discussion-search-input",L),c("focusout:delay",".js-discussion-search-input",oe),c("navigation:open",".js-discussion-search-form",t=>{lt(t)}),c("navigation:focus",".js-discussion-search-form",t=>{ut(t)}),c("navigation:keydown",".js-discussion-search-form",t=>{ct(t)}),l(".js-discussion-search-input",t=>{t.addEventListener("input",L)}),c("click",".js-discussion-search-clear",at);let ce=!1;c("submit",".js-discussion-search-form",()=>(ce=!0,!0)),document.addEventListener("pjax:end",function(){ce&&dt(),ce=!1}),l(".js-confetti-party",()=>{Ae()});var en=Object.defineProperty,ue=(t,e)=>en(t,"name",{value:e,configurable:!0});c("change",".js-discussion-spotlight-preview-trigger",function(t){const e=t.currentTarget,o=e.closest("form").querySelectorAll(`input[name="${e.name}"]`);for(const s of o){const r=s.closest("label");s.checked?r.setAttribute("aria-selected","true"):r.setAttribute("aria-selected","false")}At(e)}),c("click",".js-toggle-manage-discussion-spotlight",function(t){t.target instanceof HTMLElement});function At(t){const n=le(t).querySelector(".js-discussion-spotlight-preview");Rt(n)}ue(At,"previewTriggerChanged");async function Rt(t){const e=le(t),n=t.getAttribute("data-url"),o=new URL(n,window.location.origin),s=e.querySelector(".js-discussion-spotlight-form");o.search+=(o.search?"&":"")+ve(s);let r;try{r=await I(document,o.toString())}catch(u){return}t.replaceWith(r)}ue(Rt,"updateSpotlightPreview");function le(t){return t.closest(".js-manage-discussion-spotlight-container")}ue(le,"getManageSpotlightContainer"),C(".js-spotlight-notice-dismiss",async function(t,e){await e.text(),t.closest(".js-notice").remove(),document.querySelector(".js-discussions-categories")&&document.querySelector(".js-discussions-categories").classList.remove("v-hidden")}),l(".js-discussion-spotlights-sortable",{async add(t){const{Sortable:e}=await Ot.import("./chunk-sortable-behavior.js");e.create(t,{animation:150,handle:".js-discussion-spotlight-handle",onUpdate:async()=>{const n=t.getAttribute("data-update-url"),s=Array.from(t.querySelectorAll(".js-discussion-spotlight")).map(u=>u.getAttribute("data-id")),r=t.parentElement.querySelector(".js-data-url-csrf");!r||await fetch(n,{method:"PUT",mode:"same-origin",body:JSON.stringify({spotlight_ids:s}),headers:{"Content-Type":"application/json",Accept:"application/json","Scoped-CSRF-Token":r.value,"X-Requested-With":"XMLHttpRequest"}})}})}});var tn=Object.defineProperty,F=(t,e)=>tn(t,"name",{value:e,configurable:!0});c("click",".js-discussion-comment-thread-expand-button",function({currentTarget:t}){const e=de(t);!e||Tt(e)}),c("click",".js-discussions-fetch-all-paginated-comments",function({currentTarget:t}){const e=de(t);!e||_t(e)});function Tt(t){Et(t)&&t.setAttribute("data-open-edit-form-after-load","true")}F(Tt,"conditionallyOpenEditFormAfterLoad");function _t(t){const e=t.querySelector(".js-discussion-comment-thread-expand-button");e&&(t.setAttribute("data-open-edit-form-after-load","true"),e.click())}F(_t,"clickShowMoreButton");function de(t){return t.closest(".discussion-timeline-item.js-comment-container")}F(de,"commentContainerFor");function Et(t){const e=t.querySelector(".js-inline-comment-form-container");return e?e.classList.contains("open"):!1}F(Et,"isReplyFormOpen");var nn=Object.defineProperty,on=(t,e)=>nn(t,"name",{value:e,configurable:!0});l(".js-remove-error-state-on-click > details",{add:t=>qt(t)});function qt(t){var e;const n=(e=document.getElementById("discussion_category_id"))==null?void 0:e.getAttribute("value");if(!n)return;const o=t.querySelector(`.discussion-category-${n}`);!o||o.click()}on(qt,"conditionallyReselectCategory");var sn=Object.defineProperty,E=(t,e)=>sn(t,"name",{value:e,configurable:!0});const rn=E(async(t,e,n)=>{const o=new FormData;return o.append("option_id",n),await fetch(t,{body:o,method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":e}})},"sendRequest");class kt{constructor(e){this.optionsElement=e}checkedValue(){var e;const n=(e=this.optionsElement)==null?void 0:e.querySelector(".js-discussion-poll-option:checked");return n==null?void 0:n.value}hide(){var e;this.optionsElement&&(this.optionsElement.hidden=!0),(e=this.optionsElement)==null||e.setAttribute("aria-hidden","true")}show(){var e;this.optionsElement&&(this.optionsElement.hidden=!1),(e=this.optionsElement)==null||e.setAttribute("aria-hidden","false")}}E(kt,"PollOptionsElement");class xt{constructor(e){this.resultsElement=e}hide(){var e;this.resultsElement&&(this.resultsElement.hidden=!0),(e=this.resultsElement)==null||e.setAttribute("aria-hidden","true")}show(){var e;this.resultsElement&&(this.resultsElement.hidden=!1),(e=this.resultsElement)==null||e.setAttribute("aria-hidden","false")}}E(xt,"PollResultsElement");class Bt{constructor(e){this.pollForm=e,this.resultsElement=new xt(e.querySelector(".js-discussion-poll-results")),this.optionsElement=new kt(e.querySelector(".js-discussion-poll-options")),this.hideResultsButton=e.querySelector(".js-poll-hide-results"),this.showResultsButton=e.querySelector(".js-poll-show-results"),this.voteButton=e.querySelector(".js-discussion-poll-vote-button"),this.voteUrl=this.pollForm.getAttribute("data-vote-url")||"",this.pollUrl=this.pollForm.getAttribute("data-poll-url")||""}getCsrfInputValue(){const e=this.pollForm.querySelector(".js-data-url-post-csrf");return e?e.value:""}hideResults(){var e,n,o;this.resultsElement.hide(),this.optionsElement.show(),this.hideResultsButton&&(this.hideResultsButton.hidden=!0),(e=this.hideResultsButton)==null||e.setAttribute("aria-hidden","true"),this.showResultsButton&&(this.showResultsButton.hidden=!1),(n=this.showResultsButton)==null||n.setAttribute("aria-hidden","false"),(o=this.voteButton)==null||o.setAttribute("aria-disabled","false")}showResults(){var e,n,o;this.resultsElement.show(),this.optionsElement.hide(),this.hideResultsButton&&(this.hideResultsButton.hidden=!1),(e=this.hideResultsButton)==null||e.setAttribute("aria-hidden","false"),this.showResultsButton&&(this.showResultsButton.hidden=!0),(n=this.showResultsButton)==null||n.setAttribute("aria-hidden","true"),(o=this.voteButton)==null||o.setAttribute("aria-disabled","true")}}E(Bt,"PollFormElement");class Lt{constructor(e){this.pollFormElement=e,this.bindHideResultsClick(e.hideResultsButton),this.bindShowResultsClick(e.showResultsButton),this.bindVoteClick(e.voteButton)}bindHideResultsClick(e){e==null||e.addEventListener("click",async()=>{this.hideResults()})}bindShowResultsClick(e){e==null||e.addEventListener("click",async()=>{this.showResults()})}bindVoteClick(e){e==null||e.addEventListener("click",async()=>{this.vote()})}async vote(){const e=this.pollFormElement.optionsElement.checkedValue();if(e&&(await rn(this.pollFormElement.voteUrl,this.pollFormElement.getCsrfInputValue(),e)).ok)try{const s=await(await fetch(this.pollFormElement.pollUrl,{headers:{Accept:"text/html"}})).text();this.pollFormElement.pollForm.replaceWith(Se(document,s))}catch(o){return}}hideResults(){this.pollFormElement.hideResults()}showResults(){this.pollFormElement.showResults()}}E(Lt,"Poll"),l(".js-discussion-poll-component",t=>{new Lt(new Bt(t))});var an=Object.defineProperty,cn=(t,e)=>an(t,"name",{value:e,configurable:!0});const un=new IntersectionObserver(function(t){for(const e of t)e.isIntersecting&&(e.target.hidden=!0)},{root:null,rootMargin:"0px",threshold:.1});l(".js-whats-new",t=>un.observe(t)),c("click",".js-whats-new-state",t=>{var e;((e=t.target)==null?void 0:e.parentNode).scrollIntoView({behavior:"smooth",block:"start"})});const Pt=cn(()=>{const t=document.querySelector(".js-whats-new-state");!t||(t.hidden=!1)},"showWhatsNew");document.addEventListener("pjax:end",Pt),async function(){await je,setTimeout(Pt,1e3)}()}}});
//# sourceMappingURL=discussions-462d7612.js.map
